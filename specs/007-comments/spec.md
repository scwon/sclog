# Feature Specification: 블로그 댓글 기능

**Feature Branch**: `007-comments`
**Created**: 2025-12-10
**Status**: Complete
**Input**: User description: "댓글 기능 만들고싶어"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 댓글 읽기 (Priority: P1)

블로그 방문자가 블로그 글을 읽은 후 다른 독자들이 남긴 댓글을 볼 수 있다. 댓글을 통해 다른 사람들의 의견과 추가 정보를 얻을 수 있어 글의 가치가 높아진다.

**Why this priority**: 댓글 시스템의 가장 기본적인 기능이며, 댓글을 작성하기 전에 먼저 기존 댓글을 볼 수 있어야 한다. 읽기 기능은 모든 방문자에게 제공되어야 하는 핵심 기능이다.

**Independent Test**: 블로그 글 페이지에 접속하여 댓글 영역이 표시되고 기존 댓글이 올바르게 로드되는지 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 댓글이 있는 블로그 글 페이지, **When** 방문자가 페이지를 로드하면, **Then** 글 하단에 모든 댓글이 시간순으로 표시된다
2. **Given** 댓글이 없는 블로그 글 페이지, **When** 방문자가 페이지를 로드하면, **Then** "첫 번째 댓글을 남겨주세요" 안내 메시지가 표시된다
3. **Given** 여러 개의 댓글이 있는 글, **When** 방문자가 댓글 영역을 확인하면, **Then** 각 댓글의 작성자명, 작성 시간, 내용이 표시된다

---

### User Story 2 - 댓글 작성 (Priority: P1)

블로그 방문자가 글을 읽고 자신의 생각이나 질문을 댓글로 남길 수 있다. 이를 통해 블로그 운영자와 독자 간의 소통이 가능해진다.

**Why this priority**: 댓글 읽기와 함께 댓글 시스템의 핵심 기능이다. 방문자가 의견을 남길 수 있어야 블로그에 활력이 생긴다.

**Independent Test**: 방문자가 댓글 작성 폼에 내용을 입력하고 제출하여 댓글이 정상적으로 등록되는지 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 블로그 글 페이지의 댓글 작성 폼, **When** 방문자가 이름과 댓글 내용을 입력하고 제출하면, **Then** 댓글이 등록되고 댓글 목록에 즉시 표시된다
2. **Given** 댓글 작성 폼, **When** 내용 없이 제출하려고 하면, **Then** "댓글 내용을 입력해주세요" 오류 메시지가 표시된다
3. **Given** 성공적으로 댓글이 등록된 후, **When** 페이지를 새로고침하면, **Then** 작성한 댓글이 그대로 유지되어 표시된다

---

### User Story 3 - 댓글 답글 (Priority: P2)

방문자가 기존 댓글에 답글을 달 수 있다. 이를 통해 대화 형식의 토론이 가능해지고, 특정 의견에 대한 응답을 명확하게 할 수 있다.

**Why this priority**: 기본 댓글 기능이 완성된 후 추가하면 좋은 확장 기능이다. 깊이 있는 토론을 가능하게 하지만 MVP에서는 없어도 기본 소통은 가능하다.

**Independent Test**: 기존 댓글에 답글 버튼을 클릭하여 답글을 작성하고, 해당 댓글 아래에 들여쓰기되어 표시되는지 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 기존 댓글이 있는 상태, **When** 방문자가 "답글" 버튼을 클릭하면, **Then** 해당 댓글 아래에 답글 작성 폼이 나타난다
2. **Given** 답글 작성 폼, **When** 내용을 입력하고 제출하면, **Then** 원본 댓글 아래에 들여쓰기되어 답글이 표시된다

---

### User Story 4 - 스팸 방지 (Priority: P2)

블로그에 스팸 댓글이 등록되는 것을 방지한다. 자동화된 봇이나 악의적인 사용자로부터 댓글 영역을 보호한다.

**Why this priority**: 운영 측면에서 중요하지만, 초기에는 트래픽이 적어 스팸도 적을 수 있다. 기본 기능 완성 후 추가해도 된다.

**Independent Test**: 스팸성 댓글 작성 시도 시 차단되고, 정상 댓글은 통과되는지 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 댓글 작성 폼, **When** 정상적인 사용자가 댓글을 작성하면, **Then** 추가 검증 없이 또는 간단한 검증 후 댓글이 등록된다
2. **Given** 댓글 작성 폼, **When** 봇이 자동으로 대량의 댓글을 시도하면, **Then** 스팸 방지 메커니즘에 의해 차단된다

---

### Edge Cases

- 댓글 내용이 매우 긴 경우 어떻게 처리하나? (최대 글자 수 제한: 1000자)
- 특수 문자나 이모지가 포함된 댓글은? (유니코드 지원)
- 네트워크 오류로 댓글 전송에 실패한 경우? (오류 메시지 표시 및 재시도 안내)
- 동시에 여러 명이 댓글을 작성하는 경우? (정상적으로 모두 저장)
- 댓글에 욕설이나 부적절한 내용이 있는 경우? (모더레이션 정책 적용)

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 각 블로그 글 하단에 댓글 영역을 표시해야 한다
- **FR-002**: 시스템은 해당 글에 등록된 모든 댓글을 시간순으로 표시해야 한다
- **FR-003**: 각 댓글에는 작성자명, 작성 시간, 댓글 내용이 표시되어야 한다
- **FR-004**: 방문자는 이름과 댓글 내용을 입력하여 새 댓글을 작성할 수 있어야 한다
- **FR-005**: 시스템은 댓글 내용이 비어있는 경우 제출을 막아야 한다
- **FR-006**: 시스템은 댓글 작성자명이 비어있는 경우 기본값(예: "익명")을 사용해야 한다
- **FR-007**: 댓글은 최대 1000자까지 작성할 수 있어야 한다
- **FR-008**: 시스템은 댓글 영역이 블로그의 기존 디자인과 일관성 있게 표시되어야 한다
- **FR-009**: 방문자는 기존 댓글에 답글을 작성할 수 있어야 한다
- **FR-010**: 답글은 원본 댓글 아래에 들여쓰기되어 계층 구조로 표시되어야 한다
- **FR-011**: 시스템은 스팸 댓글을 방지하는 메커니즘을 갖추어야 한다
- **FR-012**: 댓글 시스템은 GitHub Discussions 기반의 외부 서비스를 사용하여 구현한다 (GitHub 계정으로 로그인, 마크다운 지원, 답글 및 리액션 지원)

### Key Entities

- **Comment (댓글)**: 블로그 글에 대한 방문자의 의견. 작성자명, 작성 시간, 내용, 연결된 글 정보 포함
- **Reply (답글)**: 기존 댓글에 대한 응답. 부모 댓글과의 관계 정보 포함
- **Author (작성자)**: 댓글을 작성한 사람. 이름(필수), 이메일(선택적) 정보 포함

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 방문자가 30초 이내에 댓글을 작성하고 제출할 수 있다
- **SC-002**: 댓글이 제출 후 3초 이내에 화면에 표시된다
- **SC-003**: 100개 이상의 댓글이 있는 글에서도 페이지 로딩 시간이 5초를 넘지 않는다
- **SC-004**: 스팸 댓글의 95% 이상이 차단된다
- **SC-005**: 정상 댓글의 99% 이상이 정상적으로 등록된다
- **SC-006**: 모바일 기기에서도 댓글 작성이 원활하게 동작한다

## Assumptions

- 블로그는 Astro 기반의 정적 사이트이므로, 댓글 데이터 저장을 위한 외부 서비스 또는 별도 백엔드가 필요하다
- 초기 버전에서는 댓글 수정/삭제 기능은 제외한다 (추후 확장 가능)
- 이메일 알림 기능은 초기 범위에서 제외한다
- 마크다운 문법 지원은 Giscus에서 기본 제공된다
- 댓글 작성을 위해 GitHub 계정 로그인이 필요하다
